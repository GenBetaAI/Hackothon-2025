const videos = {
    standard10: {
        maths: [
            { title: "Maths Chapter 1", url: "https://www.youtube.com/embed/AOpiB_Ov11k?si=61V7iM53I2tOn4lx" },
            { title: "Maths Chapter 2", url: "https://www.youtube.com/embed/YKpTRdymDJc?si=2_GNHv_OZNyDOw3z" },
            { title: "Maths Chapter 3", url: "https://www.youtube.com/embed/vJmMGtiv3Q0?si=HQjrmhvZXfjrtDjU" },
            { title: "Maths Chapter 4", url: "https://www.youtube.com/embed/5XPV3E4sXNw?si=S_XlQxQX7a2wkfhY" },
            { title: "Maths Chapter 5", url: "https://www.youtube.com/embed/1wIB6DqNBng?si=HjHbMki3uLZqvXLf" },
            { title: "Maths Chapter 6", url: "https://www.youtube.com/embed/1YThF5tDfqk?si=vvZIlTVkDZAodYcX" },
            { title: "Maths Chapter 7", url: "https://www.youtube.com/embed/RPR0LU4hIuM?si=ef_xAW16x4iAlUJ6" },
            { title: "Maths Chapter 8", url: "https://www.youtube.com/embed/wrHBxbRyFQI?si=deweieavo7PcVNNn" },
            { title: "Maths Chapter 9", url: "https://www.youtube.com/embed/ljJaVp3Fibw?si=wwHaVecN_OEcsdFV" },
            { title: "Maths Chapter 11", url: "https://www.youtube.com/embed/gmUQZXQVVOA?si=qMsVbj3_V5u9LwLt" },
            { title: "Maths Chapter 12", url: "https://www.youtube.com/embed/WXXLxz9iA0o?si=UpxwpZt8tRL6hZf" },
            { title: "Maths Chapter 13", url: "https://www.youtube.com/embed/PnjkcoQgJPg?si=T9txoS0T4VP_Dvig" },
            { title: "Maths Chapter 14", url: "https://www.youtube.com/embed/rfhd40bytXs?si=zYtVb65xHRQTgwC0" },
        ],
        science: [
            { title: "Science Chapter 1", url: "https://www.youtube.com/embed/R2ZmFk15XIM?si=ZvPyQ6rKCKc7SBts" },
            { title: "Science Chapter 2", url: "https://www.youtube.com/embed/KzWcbFdGEFQ?si=6MTPcezYkjVMC9UQ" },
            { title: "Science Chapter 3", url: "https://www.youtube.com/embed/qePV4M9DSik?si=JtkStYW2tZAs0_X4" },
            { title: "Science Chapter 4 (PART-1)", url: "https://www.youtube.com/embed/g2spK93GYKE?si=5fEUG-1sZ9wsBiKK" },
            { title: "Science Chapter 4 (PART-2)", url: "https://www.youtube.com/embed/Tb8UHLYfMPU?si=XKcGbqUwpvNKS2KE" },
            { title: "Science Chapter 5 (PART-1)", url: "https://www.youtube.com/embed/UZ2AyzwFbrI?si=DxDQtLOZ3WK8ld05" },
            { title: "Science Chapter 5 (PART-2)", url: "https://www.youtube.com/embed/Y3fIHfwwJMw?si=H_rH-wIdZRB1mi2i" },
            { title: "Science Chapter 6", url: "https://www.youtube.com/embed/iNsJAd5t7MM?si=32xjnQX-A3nowMwA" },
            { title: "Science Chapter 7", url: "https://www.youtube.com/embed/vJAtpdIX48o?si=HfetqTUbfAB_BxuN" },
            { title: "Science Chapter 8", url: "https://www.youtube.com/embed/Lql2AzF6hv0?si=DmjggEN8akgSpz8I" },
            { title: "Science Chapter 9", url: "https://www.youtube.com/embed/Edh-ygbVyRs?si=tTRXfqcIo6jwPeQo" },
            { title: "Science Chapter 10", url: "https://www.youtube.com/embed/SATQRU5ymxQ?si=ZnV7bhPlDT3h3N1o" },
            { title: "Science Chapter 11", url: "https://www.youtube.com/embed/uTQ1gnSHtSg?si=n1ocxBED45dWukJ2" },
            { title: "Science Chapter 13", url: "https://www.youtube.com/embed/e4KCbbwbGGY?si=oGhLyiv7tn8opnX_" },

 
        ],
        english: [
            { title: "English Unit 1", url: "https://www.youtube.com/embed/x1PLHb7eNic?si=w9Sh7wfTnYcXmUlr" },
            { title: "English Unit 2", url: "https://www.youtube.com/embed/ivyTOONFK6I?si=vyUESyQBhmENcC51" },
            { title: "English Unit 3 + Poem 1,2", url: "https://www.youtube.com/embed/1cDeNPEq_tE?si=Qo4cI4VpQJgmpfMC" },
            { title: "English Unit 4 + Functions", url: "https://www.youtube.com/embed/Zbc2MxRKcdg?si=RrKAbZwLFF-_wQsl" },
            { title: "English Unit 5 & 6", url: "https://www.youtube.com/embed/wnQD7OfGJ7g?si=ggF7SlTz5zm92_i9" },
            { title: "English Unit 7 & 8", url: "https://www.youtube.com/embed/1dz-5QYHjIw?si=NrdQZ20ZY-eHAohd" },
            { title: "English Unit 9 & 10", url: "https://www.youtube.com/embed/XLE407eQAiI?si=PIa0scKdSqB3D-dB" },
            { title: "English Grammer - Do as Directed", url: "https://www.youtube.com/embed/Wx1zA4Tlzho?si=P4DvAqTeT8qO7v5Y" },
            { title: "English Grammer - Reported Speech", url: "https://www.youtube.com/embed/gAvm6yGYMYU?si=CXQnn5NANSWK0fxb" },
        ],
        socialScience: [
            { title: "Social Science Chapter 1", url: "https://www.youtube.com/embed/RSjKXGLT--U?si=zdNkFhtvNSSBVWg9" },
            { title: "Social Science Chapter 2", url: "https://www.youtube.com/embed/wCc7bHqkMw4?si=hG7Azm5JgubDBR60" },
            { title: "Social Science Chapter 3", url: "https://www.youtube.com/embed/mSC4yLzLNDI?si=qRYBL5ZK0UgEaOvj" },
            { title: "Social Science Chapter 4 & 5", url: "https://www.youtube.com/embed/1ynQfmZnIz8?si=mYBmFrDDzEMq-x-W" },
            { title: "Social Science Chapter 6 & 7", url: "https://www.youtube.com/embed/9NtsCYx3fKg?si=y6tIdppd6FtMQN0p" },
            { title: "Social Science Chapter 8 & 9", url: "https://www.youtube.com/embed/Dkzn_xS4ygQ?si=ZrQqloFoVKRn71MS" },
            { title: "Social Science Chapter 10 & 11", url: "https://www.youtube.com/embed/Qxog-R0nWpg?si=M9LwhA8HXMiAT2zj" },
            { title: "Social Science Chapter 12 & 13", url: "https://www.youtube.com/embed/_X3h-6gcF3o?si=wiqi2y3trVF1Iwl6" },
            { title: "Social Science Chapter 15 & 16", url: "https://www.youtube.com/embed/DtCPMEp3A4c?si=bFNWxh2QF29HmdE8" },
            { title: "Social Science Chapter 17 & 19", url: "https://www.youtube.com/embed/vqvu00BOXsw?si=Y_VcUoAXaKeK9jZV" },
            { title: "Social Science Chapter 18", url: "https://www.youtube.com/embed/tRivXjtUZS4?si=XBWA1q6FLDs4Gykc" },
        ]
    },
    class11: {
        physics: [
            { title: "Physics Lesson 1", url: "https://www.youtube.com/embed/dQw4w9WgXcQ" },
            { title: "Physics Lesson 2", url: "https://www.youtube.com/embed/dQw4w9WgXcQ" }
        ],
        chemistry: [
            { title: "Chemistry Lesson 1", url: "https://www.youtube.com/embed/dQw4w9WgXcQ" },
            { title: "Chemistry Lesson 2", url: "https://www.youtube.com/embed/dQw4w9WgXcQ" }
        ],
        math: [
            { title: "Math Lesson 3", url: "https://www.youtube.com/embed/dQw4w9WgXcQ" },
            { title: "Math Lesson 4", url: "https://www.youtube.com/embed/dQw4w9WgXcQ" }
        ]
    },
    class12: {
        physics: [
            { title: "Physics Lesson 3", url: "https://www.youtube.com/embed/dQw4w9WgXcQ" },
            { title: "Physics Lesson 4", url: "https://www.youtube.com/embed/dQw4w9WgXcQ" }
        ],
        chemistry: [
            { title: "Chemistry Lesson 3", url: "https://www.youtube.com/embed/dQw4w9WgXcQ" },
            { title: "Chemistry Lesson 4", url: "https://www.youtube.com/embed/dQw4w9WgXcQ" }
        ],
        biology: [
            { title: "Biology Lesson 1", url: "https://www.youtube.com/embed/dQw4w9WgXcQ" },
            { title: "Biology Lesson 2", url: "https://www.youtube.com/embed/dQw4w9WgXcQ" }
        ]
    },
    diplomasem1: {
        Maths: [
            { title: "Chapter - 1 (PART1)", url: "https://www.youtube.com/embed/WrevG0rreUw?si=j4SWcVWc27JVK1WS" },
            { title: "Chapter - 1 (PART2)", url: "https://www.youtube.com/embed/n7hyentCTik?si=lbPgKcbU9noBTJWa" },
            { title: "Chapter - 1 (PART3)", url: "https://www.youtube.com/embed/8sd99Sb9aZU?si=QDwyn0AG60OOqbUN" },
            { title: "Chapter - 1 (PART4)", url: "https://www.youtube.com/embed/vnXAhiVDnlc?si=xLCm9j43pCUvynlZ" },
            { title: "Chapter - 1 (PART5)", url: "https://www.youtube.com/embed/Xa6WrGQEfFc?si=glXW8ITtWT8OQAfc" },
            { title: "Chapter - 1 (PART6)", url: "https://www.youtube.com/embed/CLsxuQdn-HM?si=qgJjovPs--rUHuHT" },
            { title: "Chapter - 1 (PART7)", url: "https://www.youtube.com/embed/3HvKo9PZXzc?si=KalDRtdkzc5dH0MX" },
            { title: "Chapter - 2 (PART1)", url: "https://www.youtube.com/embed/OgGKng88eHU?si=8wyyf6G4ml35tzC5" },
            { title: "Chapter - 2 (PART2)", url: "https://www.youtube.com/embed/t62aHsuMAv0?si=DURAAwipMUTb21w_" },
            { title: "Chapter - 2 (PART3)", url: "https://www.youtube.com/embed/my640itR5gQ?si=u5WOz6oUFk0qxYDp" },
            { title: "Chapter - 2 (PART4)", url: "https://www.youtube.com/embed/nzpcgOCJ_q8?si=r4i6nIQKbaxKMh1S" },
            { title: "Chapter - 2 (PART5)", url: "https://www.youtube.com/embed/K6wcegflj1w?si=mckzGb3gP6F8LY0X" },
            { title: "Chapter - 2 (PART6)", url: "https://www.youtube.com/embed/fcmjss1LjFc?si=cjpIpwUUdiN6ts8s" },
            { title: "Chapter - 2 (PART7)", url: "https://www.youtube.com/embed/OwL7VyheXNI?si=K_0bDZSEIrmEnyHJ" },
            { title: "Chapter - 3 (PART1)", url: "https://www.youtube.com/embed/os6IgrB58KE?si=20QBn8IVxC5gjott" },
            { title: "Chapter - 3 (PART2)", url: "https://www.youtube.com/embed/QlWcu-08nGs?si=RmAS-wlnPmlenoQD" },
            { title: "Chapter - 3 (PART3)", url: "https://www.youtube.com/embed/5AM53rFy9UM?si=Mjb3L9TEv_3RecIQ" },
            { title: "Chapter - 3 (PART4)", url: "https://www.youtube.com/embed/I2r1l4popfY?si=TP_ZUeLfgWHzt0SM" },
            { title: "Chapter - 3 (PART5)", url: "https://www.youtube.com/embed/U_s0rqGFRUA?si=5SdgOY_rzLRQ9hq_" },
            { title: "Chapter - 3 (PART6)", url: "https://www.youtube.com/embed/xEpXtBKcxQg?si=ossBT5AF1jyYPP65" },
            { title: "Chapter - 3 (PART7)", url: "https://www.youtube.com/embed/CCEHU7ztUw0?si=F9hKQgvuFR_trFwu" },
            { title: "Chapter - 4 (PART1)", url: "https://www.youtube.com/embed/ir9smKoIQaA?si=NNXmtseLCGJgiq17" },
            { title: "Chapter - 4 (PART2)", url: "https://www.youtube.com/embed/1pW1G08x2FU?si=oTRgkm_s8EIZ7ax1" },
            { title: "Chapter - 4 (PART3)", url: "https://www.youtube.com/embed/PcG5NHZcTpM?si=GKODYfcBzHTDniom" },
            { title: "Chapter - 4 (PART4)", url: "https://www.youtube.com/embed/2x_qHHuVCUY?si=JXEo7Ls1chi2yPoc" },
            { title: "Chapter - 4 (PART5)", url: "https://www.youtube.com/embed/fekzbuhzWw0?si=6f4QorVRZ7wFJJe6" },
            { title: "Chapter - 4 (PART6)", url: "https://www.youtube.com/embed/y-HI42PrPag?si=LnxqwQu3If6yIZL7" },
            { title: "Chapter - 5 (PART1)", url: "https://www.youtube.com/embed/RILwEBAFK30?si=t629rvxo3rbf-szt" },
            { title: "Chapter - 5 (PART2)", url: "https://www.youtube.com/embed/S84nukjlMCM?si=15ug4s_0UGC9BYiL" },
            { title: "Chapter - 5 (PART3)", url: "https://www.youtube.com/embed/VNtAe6hO5Ow?si=Y7OfU-naOibJ-4m1" },
            { title: "Chapter - 5 (PART4)", url: "https://www.youtube.com/embed/2eOpYIj9fQs?si=19zZtYevBqkQuLEc" },
            { title: "Chapter - 5 (PART5)", url: "https://www.youtube.com/embed/G64fZRjtn7I?si=Ga_ffjraBkKYnvY5" },
        ]
    },
    diplomasem2: {
        Maths: [
            { title: "Chapter - 1 (PART1)", url: "https://www.youtube.com/embed/A9CGnb1oyVA?si=5-dLwNDfGVXBdIEl" },
            { title: "Chapter - 1 (PART2)", url: "https://www.youtube.com/embed/x3ortDJDPiA?si=VDVNhtLzjzPc1tEO" },
            { title: "Chapter - 1 (PART3)", url: "https://www.youtube.com/embed/7-XMQbKn2Fw?si=z8cE7zOogXhmI6il" },
            { title: "Chapter - 1 (PART4)", url: "https://www.youtube.com/embed/JAXX6goPMak?si=gGN8HTbbG4vf8fe4" },
            { title: "Chapter - 1 (PART5)", url: "https://www.youtube.com/embed/3kNqlrsa47Q?si=BzHrhk8PpyWKgJ6y" },
            { title: "Chapter - 1 (PART6)", url: "https://www.youtube.com/embed/Z98L1A4fISA?si=2H2Rkmph35gTOTCC" },
            { title: "Chapter - 1 (PART7)", url: "https://www.youtube.com/embed/eSCzYJ54Cdo?si=Rk6aF70oZeY1tInU" },
            { title: "Chapter - 1 (PART8)", url: "https://www.youtube.com/embed/G8kdsYkSeB8?si=a0k3sret_P4O-xQ_" },
            { title: "Chapter - 1 (PART9)", url: "https://www.youtube.com/embed/A2CO5Uni5eU?si=DaJH4svQkKulfVC_" },
            { title: "Chapter - 2 (PART1)", url: "https://www.youtube.com/embed/v3owgdrybiA?si=-DY7TLuaJ1yFoSY1" },
            { title: "Chapter - 2 (PART2)", url: "https://www.youtube.com/embed/sVmPTKhazEs?si=9-SFOfAqYTEFTMKO" },
            { title: "Chapter - 2 (PART3)", url: "https://www.youtube.com/embed/YoLlQUgpPp0?si=YNDMjidAyaBniAHM" },
            { title: "Chapter - 2 (PART4)", url: "https://www.youtube.com/embed/QA5QUagwuUg?si=tAAJW4KSPdxypZ93" },
            { title: "Chapter - 2 (PART5)", url: "https://www.youtube.com/embed/ARmxVv8cieA?si=Ko2Cw3PA3mZ9eGcI" },
            { title: "Chapter - 2 (PART6)", url: "https://www.youtube.com/embed/bbRc8-Cx-Hg?si=2LDUdSc6Gb1-L0DF" },
            { title: "Chapter - 2 (PART7)", url: "https://www.youtube.com/embed/gT7K_liCxv8?si=-PgOcT_PoYRvr89l" },
            { title: "Chapter - 2 (PART8)", url: "https://www.youtube.com/embed/A9CGnb1oyVA?si=0J4wkI2yJ_HeVccD" },
            { title: "Chapter - 3 (PART1)", url: "https://www.youtube.com/embed/MD1EoJq8BsA?si=8cntJZmd1eRa9AZ-" },
            { title: "Chapter - 3 (PART2)", url: "https://www.youtube.com/embed/zOkDIe5m7KQ?si=TcnYcM9ZYdP_FgH_" },
            { title: "Chapter - 3 (PART3)", url: "https://www.youtube.com/embed/gKFv0baczwI?si=V8dP98t6oE4p6LC9" },
            { title: "Chapter - 3 (PART4)", url: "https://www.youtube.com/embed/mxMUSbasXJQ?si=R0wYGuGuSrzJU48U" },
            { title: "Chapter - 3 (PART5)", url: "https://www.youtube.com/embed/9nchQwLvQTE?si=luB2euukgRIfJioz" },
            { title: "Chapter - 3 (PART6)", url: "https://www.youtube.com/embed/gFmBLhWR92s?si=mqKRZfBdB-oCcldr" },
            { title: "Chapter - 4 (PART1)", url: "https://www.youtube.com/embed/MYYgPnc048U?si=HJm58C8w2bW-cCmJ" },
            { title: "Chapter - 4 (PART2)", url: "https://www.youtube.com/embed/2idzyNhC5eg?si=jHbcvJV3noPprPmt" },
            { title: "Chapter - 5 (PART1)", url: "https://www.youtube.com/embed/fCJHrALGFek?si=snZuqxagENnQxm5t" },
            { title: "Chapter - 5 (PART2)", url: "https://www.youtube.com/embed/ClHJ9hoqieo?si=BmsQOiLuhkrJE-Vx" },
            { title: "Chapter - 5 (PART3)", url: "https://www.youtube.com/embed/mj_cdU3NrtU?si=c2Rjntt86IfUT3ss" },
            { title: "Chapter - 5 (PART4)", url: "https://www.youtube.com/embed/yunewhm6UiM?si=H-lA1UqG67BKxLOZ" },
        ],

    }
};

$('#standardSelect').change(function() {
    const selectedStandard = $(this).val();
    const subjectSelect = $('#subjectSelect');
    const chapterSelect = $('#chapterSelect');
    const videoContainer = $('#videoContainer');
    
    // Reset all dependent fields
    subjectSelect.prop('disabled', true).empty().append('<option value="">Select Subject</option>');
    chapterSelect.prop('disabled', true).empty().append('<option value="">Select Chapter</option>');
    videoContainer.empty();

    if (selectedStandard && videos[selectedStandard]) {
        subjectSelect.prop('disabled', false);
        // Populate subjects with correct case
        Object.keys(videos[selectedStandard]).forEach(subject => {
            const formattedSubject = subject.charAt(0).toUpperCase() + subject.slice(1);
            subjectSelect.append(`<option value="${subject}">${formattedSubject}</option>`);
        });
    }
});

$('#subjectSelect').change(function() {
    const selectedStandard = $('#standardSelect').val();
    const selectedSubject = $(this).val();
    const chapterSelect = $('#chapterSelect');
    const videoContainer = $('#videoContainer');
    
    // Reset dependent fields
    chapterSelect.prop('disabled', true).empty().append('<option value="">Select Chapter</option>');
    videoContainer.empty();

    if (selectedStandard && selectedSubject && videos[selectedStandard][selectedSubject]) {
        chapterSelect.prop('disabled', false);
        // Populate chapters with indexes
        videos[selectedStandard][selectedSubject].forEach((video, index) => {
            chapterSelect.append(`<option value="${index}">${video.title}</option>`);
        });
    }
});

$('#chapterSelect').change(function() {
    const selectedStandard = $('#standardSelect').val();
    const selectedSubject = $('#subjectSelect').val();
    const selectedChapterIndex = parseInt($(this).val()); // Convert to number
    const videoContainer = $('#videoContainer');
    videoContainer.empty();

    if (!isNaN(selectedChapterIndex)) {
        const video = videos[selectedStandard][selectedSubject][selectedChapterIndex];
        if (video) {
            const videoCard = `
                <div class="col-md-12">
                    <div class="card mb-4">
                        <div class="card-body">
                            <h5 class="card-title">${video.title}</h5>
                            <div class="embed-responsive embed-responsive-16by9">
                                <iframe class="embed-responsive-item"
                                    src="${video.url}"
                                    title="YouTube video player" 
                                    frameborder="0"
                                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                                    allowfullscreen>
                                </iframe>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            videoContainer.append(videoCard);
        }
    }
});

document.addEventListener("DOMContentLoaded", function () {
    // Check for subject progress and daily streak on page load.
    checkSubjectCompletion();
    checkVisitStreak();
  
    // Share button event.
    document.getElementById("shareBtn").addEventListener("click", function () {
      alert("Share functionality coming soon!");
    });
  });
  
  // Unlocks a badge given its data-badge name.
  function unlockBadge(badgeName) {
    var badgeElem = document.querySelector(".badge[data-badge='" + badgeName + "']");
    if (badgeElem && badgeElem.dataset.unlocked === "false") {
      badgeElem.dataset.unlocked = "true";
      badgeElem.classList.remove("locked");
      badgeElem.querySelector("p").innerText = "Unlocked";
      // Play unlock sound.
      document.getElementById("unlockSound").play();
    }
  }
  
  // Call this function when a user finishes a video.
  // standard: (e.g., "standard10"), subject: (e.g., "maths"), videoIndex: index of the completed video.
  function markVideoComplete(standard, subject, videoIndex) {
    let userProgress = JSON.parse(localStorage.getItem('userProgress')) || {};
  
    // Ensure nested structure exists.
    userProgress[standard] = userProgress[standard] || {};
    userProgress[standard][subject] = userProgress[standard][subject] || [];
  
    // Mark this video as complete if not already done.
    if (!userProgress[standard][subject].includes(videoIndex)) {
      userProgress[standard][subject].push(videoIndex);
    }
    localStorage.setItem('userProgress', JSON.stringify(userProgress));
  
    // Check if all videos in the subject are complete.
    checkIfSubjectComplete(standard, subject);
  }
  
  // Checks if a subject is fully complete and unlocks the corresponding badge.
  function checkIfSubjectComplete(standard, subject) {
    const userProgress = JSON.parse(localStorage.getItem('userProgress')) || {};
    const completedVideos = (userProgress[standard] && userProgress[standard][subject]) || [];
    // Assume a global 'videos' object is defined with a structure: videos[standard][subject] = [video1, video2, ...]
    const totalVideos = (videos[standard] && videos[standard][subject]) ? videos[standard][subject].length : 0;
  
    if (totalVideos > 0 && completedVideos.length === totalVideos) {
      // Unlock badge based on subject name.
      switch (subject.toLowerCase()) {
        case "maths":
          unlockBadge("MathsTopper");
          localStorage.setItem("mathsComplete", "true");
          break;
        case "science":
          unlockBadge("ScienceMaster");
          localStorage.setItem("scienceComplete", "true");
          break;
        case "english":
          unlockBadge("EnglishMaster");
          localStorage.setItem("englishComplete", "true");
          break;
        case "socialscience":
          unlockBadge("SocialScienceMaster");
          localStorage.setItem("socialScienceComplete", "true");
          break;
        // Add more cases as needed.
      }
    }
  }
  
  // On page load, check localStorage flags and unlock badges if subjects are complete.
  function checkSubjectCompletion() {
    if (localStorage.getItem("mathsComplete") === "true") {
      unlockBadge("MathsTopper");
    }
    if (localStorage.getItem("scienceComplete") === "true") {
      unlockBadge("ScienceMaster");
    }
    if (localStorage.getItem("englishComplete") === "true") {
      unlockBadge("EnglishMaster");
    }
    if (localStorage.getItem("socialScienceComplete") === "true") {
      unlockBadge("SocialScienceMaster");
    }
  }
  
  // Checks the user's daily visit streak and unlocks the appropriate streak badges.
  function checkVisitStreak() {
    const streakKey = 'visitStreak';
    const lastVisitKey = 'lastVisit';
    let streak = parseInt(localStorage.getItem(streakKey)) || 0;
    let lastVisit = localStorage.getItem(lastVisitKey);
    let today = new Date().toISOString().split('T')[0];
  
    if (lastVisit) {
      // Calculate difference in days.
      const diffDays = (new Date(today) - new Date(lastVisit)) / (1000 * 60 * 60 * 24);
      if (diffDays === 1) {
        streak++;
      } else if (diffDays > 1) {
        streak = 1; // Reset streak if a day is missed.
      }
    } else {
      streak = 1;
    }
    localStorage.setItem(streakKey, streak.toString());
    localStorage.setItem(lastVisitKey, today);
  
    // Unlock streak badges based on thresholds.
    if (streak >= 7) {
      unlockBadge("7DaysStreak");
    }
    if (streak >= 14) {
      unlockBadge("14DaysStreak");
    }
    if (streak >= 21) {
      unlockBadge("21DaysStreak");
    }
    if (streak >= 30) {
      unlockBadge("1MonthStreak");
    }
  }
  